<!DOCTYPE html>
<html lang="ru-RU">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Пользовательская анимация JavaScript | Touhou Little Maid Вики</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Вики, связанная с разработкой Touhou Little Maid">
    
    <link rel="preload" href="/TouhouLittleMaid/assets/css/0.styles.c3e38df3.css" as="style"><link rel="preload" href="/TouhouLittleMaid/assets/js/app.0d214d66.js" as="script"><link rel="preload" href="/TouhouLittleMaid/assets/js/2.6bfae921.js" as="script"><link rel="preload" href="/TouhouLittleMaid/assets/js/1.e6d3c32f.js" as="script"><link rel="preload" href="/TouhouLittleMaid/assets/js/95.aa13d0bc.js" as="script"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/10.da380764.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/100.2cd5e1d0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/101.22edb9f1.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/102.482c782e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/103.c5f2d849.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/104.4c3ca6e1.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/105.55ed8d36.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/106.917e4f04.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/107.836420c2.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/108.7cd5fa7c.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/109.b93451cf.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/11.72ae73cf.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/110.b33538d3.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/111.a62228cc.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/112.6eaf09ac.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/113.9cdadfa6.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/114.4cd57a65.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/115.70ef0850.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/116.055322c8.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/117.4b1a4e68.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/118.38082445.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/119.82410d1e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/12.4ef66142.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/13.5eccdd1e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/14.3eb9dfa2.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/15.df39777f.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/16.fcff4e7b.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/17.13f9f737.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/18.6d3b94c1.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/19.fd36e329.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/20.dadc13e1.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/21.e6ea6789.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/22.d6dd6838.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/23.7644efef.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/24.49d67207.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/25.50f2775a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/26.499b887e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/27.da876177.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/28.8c9cd3e7.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/29.cc520228.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/3.fb24add6.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/30.17a0565d.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/31.e94ebe66.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/32.88b02eea.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/33.11481b20.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/34.1eda958d.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/35.7cb197fa.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/36.25bab098.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/37.730755ce.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/38.0fa16594.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/39.8b7cd42f.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/4.84e1e480.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/40.275ac68b.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/41.e3d6e8a1.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/42.d05e0adc.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/43.d762e602.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/44.2616b1bb.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/45.3531f370.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/46.f0a7df49.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/47.91fbf833.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/48.180c583a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/49.a14742c2.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/5.d1364975.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/50.7daff065.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/51.6065ffcc.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/52.b222be95.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/53.293f9b07.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/54.b0e13135.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/55.31cc900a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/56.5e3d6279.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/57.7321eb56.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/58.9e0f41e5.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/59.966afbae.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/6.95c348a6.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/60.5709f945.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/61.b18d2b9d.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/62.7fd8a141.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/63.1e44899f.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/64.1c6ed2aa.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/65.62babaf7.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/66.5c90a2cd.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/67.42819055.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/68.3e78b586.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/69.5350aa84.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/7.c5b5bad4.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/70.9db89af0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/71.7e9bbfc1.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/72.4e39d762.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/73.71dad78a.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/74.ec14dd66.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/75.078cb3ea.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/76.38455b18.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/77.7893c904.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/78.069bbc60.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/79.2611cbe5.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/80.14d918d0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/81.47c3e1dd.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/82.3af3eebd.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/83.4d63937f.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/84.358433c5.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/85.ec9c12c4.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/86.58a726e0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/87.4aa8465e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/88.997272f0.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/89.0fd9c84c.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/90.cf3ab8a8.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/91.f06d630d.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/92.ae5970af.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/93.1d8b8288.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/94.51dfef78.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/96.cd7f4f5e.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/97.f78bac92.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/98.444a3bec.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/99.3cb4e284.js"><link rel="prefetch" href="/TouhouLittleMaid/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/TouhouLittleMaid/assets/css/0.styles.c3e38df3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TouhouLittleMaid/ru_RU/" class="home-link router-link-active"><!----> <span class="site-name">Touhou Little Maid Вики</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/TouhouLittleMaid/ru_RU/" class="nav-link router-link-active">
  Главная
</a></div><div class="nav-item"><a href="https://github.com/TartaricAcid/TouhouLittleMaid" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.curseforge.com/minecraft/mc-mods/touhou-little-maid" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CurseForge
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Языки" class="dropdown-title"><span class="title">Языки</span> <span class="arrow down"></span></button> <button type="button" aria-label="Языки" class="mobile-dropdown-title"><span class="title">Языки</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/custom_javascript_animation.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/es_ES/custom_javascript_animation.html" class="nav-link">
  es-ES
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/ja_JP/custom_javascript_animation.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/pt_BR/custom_javascript_animation.html" class="nav-link">
  Português (Brasil)
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/ru_RU/custom_javascript_animation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Русский
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/vi_VN/custom_javascript_animation.html" class="nav-link">
  Tiếng Việt
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/zh_CN/custom_javascript_animation.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/TouhouLittleMaid/ru_RU/" class="nav-link router-link-active">
  Главная
</a></div><div class="nav-item"><a href="https://github.com/TartaricAcid/TouhouLittleMaid" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://www.curseforge.com/minecraft/mc-mods/touhou-little-maid" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CurseForge
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Языки" class="dropdown-title"><span class="title">Языки</span> <span class="arrow down"></span></button> <button type="button" aria-label="Языки" class="mobile-dropdown-title"><span class="title">Языки</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/custom_javascript_animation.html" class="nav-link">
  English
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/es_ES/custom_javascript_animation.html" class="nav-link">
  es-ES
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/ja_JP/custom_javascript_animation.html" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/pt_BR/custom_javascript_animation.html" class="nav-link">
  Português (Brasil)
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/ru_RU/custom_javascript_animation.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Русский
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/vi_VN/custom_javascript_animation.html" class="nav-link">
  Tiếng Việt
</a></li><li class="dropdown-item"><!----> <a href="/TouhouLittleMaid/zh_CN/custom_javascript_animation.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Пользовательская модель</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TouhouLittleMaid/ru_RU/custom_model_pack.html" class="sidebar-link">Пользовательский набор моделей</a></li><li><a href="/TouhouLittleMaid/ru_RU/maid_model_pack_details.html" class="sidebar-link">Подробная информация о наборе моделей</a></li><li><a href="/TouhouLittleMaid/ru_RU/chair_model_pack_details.html" class="sidebar-link">Детали моделей стульев</a></li><li><a href="/TouhouLittleMaid/ru_RU/custom_javascript_animation.html" aria-current="page" class="active sidebar-link">Пользовательская анимация JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TouhouLittleMaid/ru_RU/custom_javascript_animation.html#базовыи-формат" class="sidebar-link">Базовый формат</a></li><li class="sidebar-sub-header"><a href="/TouhouLittleMaid/ru_RU/custom_javascript_animation.html#быстрая-перезагрузка" class="sidebar-link">Быстрая перезагрузка</a></li><li class="sidebar-sub-header"><a href="/TouhouLittleMaid/ru_RU/custom_javascript_animation.html#документация-по-функциям" class="sidebar-link">Документация по функциям</a></li></ul></li><li><a href="/TouhouLittleMaid/ru_RU/preset_animation.html" class="sidebar-link">Анимация пресета</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Изменить рецепты</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="пользовательская-анимация-javascript"><a href="#пользовательская-анимация-javascript" class="header-anchor">#</a> Пользовательская анимация JavaScript</h1> <p>С помощью JavaScript-файлов вы можете добавлять пользовательские анимации для горничной или кресла.</p> <ul><li>Этот вики подходит для Touhou Little Maid <code>1.12.2</code> и <code>1.16.5</code>:</li> <li>Базовое понимание языка JavaScript;</li> <li>Немного математических знаний из средней/старшей школы, в частности тригонометрических функций и полярных координат;</li> <li>Для редактирования скриптов, рекомендуется использовать VSCode с сохранением в кодировке UTF-8 без BOM.</li></ul> <h2 id="базовыи-формат"><a href="#базовыи-формат" class="header-anchor">#</a> Базовый формат</h2> <p>Скрипт с анимацией может быть помещён в любую папку, вам нужно только указать путь к файлу для соответствующих моделей. Я рекомендую поместить его в папку <code>animation</code>.</p> <p>Ниже приведен общий шаблон：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Это вызывается только если вы хотите использовать GlWrapper</span>
<span class="token keyword">var</span> GlWrapper <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;com.github.tartaricacid.touhoulittlemaid.client.animation.script.GlWrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Java<span class="token punctuation">.</span><span class="token function">asJSONCompatible</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">/**
     * @param entity Сущность/моб, к которой применяется данная анимация
     * @param limbSwing Скорость движения моба (как спидометр в машине)
     * @param limbSwingAmount Пройденная мобом дистанция (как счётчик пробега в машине)
     * @param ageInTicks Возраст моба в тиках, значение постоянно увеличивается от 0
     * @param netHeadYaw Поворот головы моба
     * @param headPitch Наклон головы моба
     * @param scale Значение масштабирования моба. По умолчанию - 0.0625. Применений не найдено.
     * @param modelMap Группа модели, сохраненная для хэш-карты
     */</span>
    <span class="token function-variable function">animation</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entity<span class="token punctuation">,</span> limbSwing<span class="token punctuation">,</span> limbSwingAmount<span class="token punctuation">,</span> ageInTicks<span class="token punctuation">,</span> netHeadYaw<span class="token punctuation">,</span>
                          headPitch<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> modelMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Скрипт для модели</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Простой пример: текущая модет имеет группу костей, названную <code>rotation</code>. Нам нужно, чтобы эта группа вращалась вдоль оси X со скоростью 1 градус каждый тик (18 секунд на 1 оборот). Мы можем написать анимацию так:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Это вызывается только если вам нужно использовать GlWrapper</span>
<span class="token keyword">var</span> GlWrapper <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;com.github.tartaricacid.touhoulittlemaid.client.animation.script.GlWrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Java<span class="token punctuation">.</span><span class="token function">asJSONCompatible</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">animation</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entity<span class="token punctuation">,</span> limbSwing<span class="token punctuation">,</span> limbSwingAmount<span class="token punctuation">,</span> ageInTicks<span class="token punctuation">,</span> netHeadYaw<span class="token punctuation">,</span>
                          headPitch<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> modelMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Сперва определим грумму 'rotation' из modelMap</span>
        rotation <span class="token operator">=</span> modelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;rotation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// На всякий случай, сделаем простую проверку наличия этой группы у модели</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rotation <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// С помощью setRotateAngleX, мы установим угол вращения по оси X</span>
            <span class="token comment">// ageInTicks - это возраст сущности, значение, постоянно увеличивающееся от 0</span>
            <span class="token comment">// С помощью оператора % мы найдём остаток от деленияв промежутке от 0 до 360</span>
            <span class="token comment">// Так как функция принимает только радианы, умножим полученное значение на 0.017453292 чтобы превратить градусы в радианы</span>
            <span class="token comment">// И так мы получим анимацию вращения на 1 градус каждый тик</span>
            rotation<span class="token punctuation">.</span><span class="token function">setRotateAngleX</span><span class="token punctuation">(</span>ageInTicks <span class="token operator">%</span> <span class="token number">360</span> <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Теперь мы добавим еще одно сложное движение, у нас есть группа с именем <code>wing</code>, и мы хотим, чтобы крылья постоянно двигались вперёд-назад.</p> <p>Поворот будет по оси Y на угол от <code>-20° до 40°</code>, и цикл будет повторяться каждые 5 секунд.</p> <p>Тригонометрическая функция соответствует нашим нуждам, так как вы можете использовать синус или косинус, мы будем использовать функцию синуса.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Это вызывается только если вам нужно использовать GlWrapper</span>
<span class="token keyword">var</span> GlWrapper <span class="token operator">=</span> Java<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token string">&quot;com.github.tartaricacid.touhoulittlemaid.client.animation.script.GlWrapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Java<span class="token punctuation">.</span><span class="token function">asJSONCompatible</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">animation</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">entity<span class="token punctuation">,</span> limbSwing<span class="token punctuation">,</span> limbSwingAmount<span class="token punctuation">,</span> ageInTicks<span class="token punctuation">,</span> netHeadYaw<span class="token punctuation">,</span>
        headPitch<span class="token punctuation">,</span> scale<span class="token punctuation">,</span> modelMap</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Сперва найдём группу 'wing' из modelMap</span>
        wing <span class="token operator">=</span> modelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;wing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// На всякий случай сделаем простую проверку наличия этой группы у модели</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>wing <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Один цикл займёт 5 секунд, что равно 100 тикам</span>
            <span class="token comment">// Используя умножение и остаток от деления мы получим желаемое</span>
            <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token punctuation">(</span>ageInTicks <span class="token operator">*</span> <span class="token number">3.6</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">360</span><span class="token punctuation">;</span>
            <span class="token comment">// Теперь используется функция Math из JavaScript</span>
            <span class="token comment">// Используя синус, мы получим периодическую функцию в интервале от -20° до 40°</span>
            <span class="token keyword">var</span> func <span class="token operator">=</span> <span class="token number">30</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>time <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token comment">// Так как функция принимает только радианы, умножим полученное значение на 0.017453292 чтобы превратить градусы в радианы</span>
            wing<span class="token punctuation">.</span><span class="token function">setRotateAngleY</span><span class="token punctuation">(</span>func <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>Все остальные сложные движения могут быть получены с помощью соответствующих фунций.</p> <h2 id="быстрая-перезагрузка"><a href="#быстрая-перезагрузка" class="header-anchor">#</a> Быстрая перезагрузка</h2> <p>Так как вы не можете понять, правильно ли написана анимация, только лишь посмотрев на код, мы добавили возможность быстрой перезагрузки анимации в игре.</p> <p>После того, как вы загрузите созданный вами набор ресурсов модели, просто используйте следующую команду для перезагрузки всех данных анимации.</p> <ul><li>1.12.2: <code>/maid_res reload</code></li> <li>1.16.5: <code>/tlm pack reload</code></li></ul> <h2 id="документация-по-функциям"><a href="#документация-по-функциям" class="header-anchor">#</a> Документация по функциям</h2> <p>Зачёркнутый стиль означает, что данные функции устарели в 1.16, вы можете посетить <a href="https://github.com/TartaricAcid/TouhouLittleMaid/tree/1.16.5/src/main/java/com/github/tartaricacid/touhoulittlemaid/api/animation" target="_blank" rel="noopener noreferrer">эту ссылку<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> чтобы увидеть исходный код.</p> <h3 id="параметры-сущностеи"><a href="#параметры-сущностеи" class="header-anchor">#</a> Параметры сущностей</h3> <p>В зависимости от цели, к которой применяется анимация, функции, используемые <code>сущностью</code>, также могут отличаться друг от друга.</p> <h4 id="горничная"><a href="#горничная" class="header-anchor">#</a> Горничная</h4> <table><thead><tr><th style="text-align:center;">Имя функции</th> <th style="text-align:center;">Возвращаемое значение</th> <th style="text-align:center;">Примечание</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>hasHelmet()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Если горничная надела шлем, возвращает <code>true</code></td></tr> <tr><td style="text-align:center;"><code>hasChestPlate()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Есди горничная надела нагрудник, возвращает <code>true</code></td></tr> <tr><td style="text-align:center;"><code>hasLeggings()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Если горничная надела поножи, возвращает <code>true</code></td></tr> <tr><td style="text-align:center;"><code>hasBoots()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Если горничная надела ботинки, возвращает <code>true</code></td></tr> <tr><td style="text-align:center;"><code>getHelmet()</code></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Если горничная надела шлем, возвращает имя шлема из реестра предметов</td></tr> <tr><td style="text-align:center;"><code>getChestPlate()</code></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Если горничная надела нагрудник, возвращает имя нагрудника из реестра предметов</td></tr> <tr><td style="text-align:center;"><code>getLeggings()</code></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Если горничная надела поножи, возвращает имя поножей из реестра предметов</td></tr> <tr><td style="text-align:center;"><code>getBoots()</code></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Если горничная надела ботинки, возвращает имя ботинок из реестра предметов</td></tr> <tr><td style="text-align:center;"><code>isBegging()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Находится ли горничная в режиме попрошайки</td></tr> <tr><td style="text-align:center;"><code>isSwingingArms()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Если горничная двигает руками, эта функция вернет <code>true</code></td></tr> <tr><td style="text-align:center;"><code>getSwingProgress()</code></td> <td style="text-align:center;"><code>дробное число</code></td> <td style="text-align:center;">Вернёт время анимации рук</td></tr> <tr><td style="text-align:center;"><code>isRiding()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Едет ли горничная</td></tr> <tr><td style="text-align:center;"><code>isSitting()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Сидит ли на месте горничная</td></tr> <tr><td style="text-align:center;"><s><code>isHoldTrolley()</code></s></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Держит ли горничная тележку или другие объекты</td></tr> <tr><td style="text-align:center;"><s><code>isRidingMarisaBroom()</code></s></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Сидит ли горничная на метле</td></tr> <tr><td style="text-align:center;"><s><code>isRidingPlayer()</code></s></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Едет ли горничная верхом на игроке</td></tr> <tr><td style="text-align:center;"><s><code>isHoldVehicle()</code></s></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Едет ли горничная на транспорте</td></tr> <tr><td style="text-align:center;"><s><code>isPortableAudioPlay()</code></s></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Держит ли горничная портативное радио и играет ли оно</td></tr> <tr><td style="text-align:center;"><code>hasBackpack()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Одет ли на горничной рюкзак</td></tr> <tr><td style="text-align:center;"><code>getBackpackLevel()</code></td> <td style="text-align:center;"><code>целочисленный</code></td> <td style="text-align:center;">Вернёт уровень рюкзака</td></tr> <tr><td style="text-align:center;"><s><code>hasSasimono()</code></s></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Одет ли на горничную сазимоно</td></tr> <tr><td style="text-align:center;"><code>isSwingLeftHand()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Использует ли горничная левую руку, вернёт <code>false</code>, если правую</td></tr> <tr><td style="text-align:center;"><s><code>getLeftHandRotation()</code></s></td> <td style="text-align:center;"><code>дробное число [3]</code></td> <td style="text-align:center;">Вернёт данные вращения левой руки</td></tr> <tr><td style="text-align:center;"><s><code>getRightHandRotation()</code></s></td> <td style="text-align:center;"><code>дробное число [3]</code></td> <td style="text-align:center;">Вернёт данные вращения правой руки</td></tr> <tr><td style="text-align:center;"><s><code>getDim()</code></s></td> <td style="text-align:center;"><code>целочисленный</code></td> <td style="text-align:center;">Вернёт измерение, где находится горничная</td></tr> <tr><td style="text-align:center;"><code>getWorld()</code></td> <td style="text-align:center;"><code>Мир</code></td> <td style="text-align:center;">Вернёт данные о мире</td></tr> <tr><td style="text-align:center;"><code>getTask()</code></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Вернёт занятие горничной, такое как <code>attack</code>, <code>ranged_attack</code></td></tr> <tr><td style="text-align:center;"><code>hasItemMainhand()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Есть ли предмет в главной (правой) руке горничной</td></tr> <tr><td style="text-align:center;"><code>hasItemOffhand()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Есть ли предмет во вторичной (левой) руке горничной</td></tr> <tr><td style="text-align:center;"><code>getItemMainhand()</code></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Вернёт имя предмета, находящегося в главной руке горничной, из реестра предметов</td></tr> <tr><td style="text-align:center;"><code>getItemOffhand()</code></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Вернёт имя предмета, находящегося во вторичной руке горничной, из реестра предметов</td></tr> <tr><td style="text-align:center;"><code>inWater()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">В воде ли горничная</td></tr> <tr><td style="text-align:center;"><code>inRain()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Под дождём ли горничная</td></tr> <tr><td style="text-align:center;"><code>getAtBiome()</code></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Вернёт из реестра имя биома, где находится горничная</td></tr> <tr><td style="text-align:center;"><s><code>getAtBiomeTemp()</code></s></td> <td style="text-align:center;"><code>строковый</code></td> <td style="text-align:center;">Вернёт температуру биома, в котором находится горничная</td></tr> <tr><td style="text-align:center;"><code>onHurt()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Больно ли горничной</td></tr> <tr><td style="text-align:center;"><code>getHealth()</code></td> <td style="text-align:center;"><code>дробное число</code></td> <td style="text-align:center;">Вернёт здоровье горничной</td></tr> <tr><td style="text-align:center;"><code>getMaxHealth()</code></td> <td style="text-align:center;"><code>дробное число</code></td> <td style="text-align:center;">Вернёт максимальное здоровье горничной</td></tr> <tr><td style="text-align:center;"><code>isSleep()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Спит ли горничная</td></tr> <tr><td style="text-align:center;"><code>getFavorability()</code></td> <td style="text-align:center;"><code>целочисленный</code></td> <td style="text-align:center;">Вернёт благоприятность горничной</td></tr> <tr><td style="text-align:center;"><code>isOnGround()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Находится ли горничная на блоке</td></tr> <tr><td style="text-align:center;"><code>getArmorValue()</code></td> <td style="text-align:center;"><code>большоt дробное число (double)</code></td> <td style="text-align:center;">Вернёт значение брони горничной</td></tr> <tr><td style="text-align:center;"><code>getSeed()</code></td> <td style="text-align:center;"><code>большое целое число (long)</code></td> <td style="text-align:center;">Вернёт фиксированное значение, уникальное для каждой сущности, схожее с UUID мобов</td></tr></tbody></table> <h4 id="сидение"><a href="#сидение" class="header-anchor">#</a> Сидение</h4> <table><thead><tr><th style="text-align:center;">Имя функции</th> <th style="text-align:center;">Возвращаемое значение</th> <th style="text-align:center;">Примечание</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>isRidingPlayer()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Сидит ли за этим сидением игрок</td></tr> <tr><td style="text-align:center;"><code>hasPassenger()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Имеет ли это сидение пассажира</td></tr> <tr><td style="text-align:center;"><code>getPassengerYaw()</code></td> <td style="text-align:center;"><code>дробное число</code></td> <td style="text-align:center;">Вернёт поворот пассажира</td></tr> <tr><td style="text-align:center;"><code>getYaw()</code></td> <td style="text-align:center;"><code>дробное число</code></td> <td style="text-align:center;">Вернёт поворот сидения</td></tr> <tr><td style="text-align:center;"><code>getPassengerPitch()</code></td> <td style="text-align:center;"><code>дробное число</code></td> <td style="text-align:center;">Вернёт наклон пассажира</td></tr> <tr><td style="text-align:center;"><s><code>getDim()</code></s></td> <td style="text-align:center;"><code>целочисленный</code></td> <td style="text-align:center;">Вернёт ID измерения</td></tr> <tr><td style="text-align:center;"><code>getWorld()</code></td> <td style="text-align:center;"><code>Мир</code></td> <td style="text-align:center;">Вернёт данные о мире</td></tr> <tr><td style="text-align:center;"><code>getSeed()</code></td> <td style="text-align:center;"><code>большое целое число (long)</code></td> <td style="text-align:center;">Вернёт фиксированное значение, уникальное для каждой сущности, схожее с UUID мобов</td></tr></tbody></table> <h4 id="мир"><a href="#мир" class="header-anchor">#</a> Мир</h4> <table><thead><tr><th style="text-align:center;">Имя функции</th> <th style="text-align:center;">Возвращаемое значение</th> <th style="text-align:center;">Примечание</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>getWorldTime()</code></td> <td style="text-align:center;"><code>большое целое число (long)</code></td> <td style="text-align:center;">Вернёт время в тиках (0-24000)</td></tr> <tr><td style="text-align:center;"><code>isDay()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Сейчас день?</td></tr> <tr><td style="text-align:center;"><code>isNight()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Сейчас ночь?</td></tr> <tr><td style="text-align:center;"><code>isRaining()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Идёт ли дождь</td></tr> <tr><td style="text-align:center;"><code>isThundering()</code></td> <td style="text-align:center;"><code>логический</code></td> <td style="text-align:center;">Идёт ли шторм</td></tr></tbody></table> <h3 id="limbswing-limbswingamount-parameter"><a href="#limbswing-limbswingamount-parameter" class="header-anchor">#</a> <code>limbSwing</code> &amp; <code>limbSwingAmount</code> Parameter</h3> <p>These are floating points, <code>limbSwing</code> is the walking speed of the entity (think of it as the speedometer of a car), <code>limbSwingAmount</code> is the total walking distance of the entity (think of it as the odometer of a car).</p> <p>These two data are mainly used on the rotation of the legs and limbs, Minecraft vanilla uses these two basic data to calculate the animation of the arm and leg swinging.</p> <p><code>Math.cos(limbSwing * 0.6662) * limbSwingAmount</code>(left hand)</p> <p><code>-Math.cos(limbSwing * 0.6662) * limbSwingAmount</code>(right hand)</p> <p><code>Math.cos(limbSwing * 0.6662) * limbSwingAmount * 1.4</code>(left leg)</p> <p><code>-Math.cos(limbSwing * 0.6662) * limbSwingAmount * 1.4</code>(right leg)</p> <p>Changing the value <code>0.6662</code> will control the frequency of the swing, multiplied by the coeffecient of the formula (for example, the leg uses <code>1.4</code> as the coeffecient) to change the amplitude of the swing.</p> <p>Using the vanilla Minecraft formula for arm and leg swinging can make a more natural swinging animation.</p> <h3 id="ageinticks-parameter"><a href="#ageinticks-parameter" class="header-anchor">#</a> <code>ageInTicks</code> Parameter</h3> <p>Floating point, a variable that self-increase from 0 every tick, a self-changing parameter that's used in most animation function.</p> <h3 id="netheadyaw-and-headpitch-parameter"><a href="#netheadyaw-and-headpitch-parameter" class="header-anchor">#</a> <code>netHeadYaw</code> and <code>headPitch</code> Parameter</h3> <p>Both are floating point, and are degrees value (this is how vanilla Minecraft is designed).</p> <p>Normally this parameter can be used as a rotation angle, you just need to change it into radian.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>head<span class="token punctuation">.</span><span class="token function">setRotateAngleX</span><span class="token punctuation">(</span>headPitch <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
head<span class="token punctuation">.</span><span class="token function">setRotateAngleY</span><span class="token punctuation">(</span>netHeadYaw <span class="token operator">*</span> <span class="token number">0.017453292</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>If the coeffiecient in this section is set to be larger than '0.017453292', there may have some error issue.</p></blockquote> <h3 id="scale-parameter"><a href="#scale-parameter" class="header-anchor">#</a> <code>scale</code> Parameter</h3> <p>Floating point, fixed at 0.0625.</p> <p>A value that has unknown meaning.</p> <h3 id="modelmap-parameter"><a href="#modelmap-parameter" class="header-anchor">#</a> modelMap Parameter</h3> <p>A Map that saves group, using string as keys.</p> <p>You can get the corresponding group through <code>modelMap.get(&quot;xxx&quot;)</code>. If there is no group that matches the name, return <code>undefined</code></p> <p>Let's say we want to get the target group <code>head</code>:</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>head <span class="token operator">=</span> modelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Then we can set various parameter using this <code>head</code> group to make animation.</p> <p>Of course, as a precaution, it's best to set a check for this group, to make sure it's existed.</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>head <span class="token operator">=</span> modelMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;head&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>head <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Making various animation</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="group"><a href="#group" class="header-anchor">#</a> Group</h3> <p>We can get various group via <code>modelMap.get(&quot;xxx&quot;)</code>, the following are the functions that can be used to the obtained group.</p> <table><thead><tr><th style="text-align:center;">Function name</th> <th style="text-align:center;">Return value</th> <th style="text-align:center;">Note</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>setRotateAngleX(float rotateAngleX)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Set the group's X angle</td></tr> <tr><td style="text-align:center;"><code>setRotateAngleY(float rotateAngleY)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Set the group's Y angle</td></tr> <tr><td style="text-align:center;"><code>setRotateAngleZ(float rotateAngleZ)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Set the group's Z angle</td></tr> <tr><td style="text-align:center;"><code>setOffsetX(float offsetX)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Set the group's X coordianate offset</td></tr> <tr><td style="text-align:center;"><code>setOffsetY(float offsetY)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Set the group's Y coordianate offset</td></tr> <tr><td style="text-align:center;"><code>setOffsetZ(float offsetZ)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Set the group's Z coordianate offset</td></tr> <tr><td style="text-align:center;"><code>setHidden(boolean hidden)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Set if the group is hidden</td></tr> <tr><td style="text-align:center;"><code>getRotateAngleX()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Obtain the group's X angle</td></tr> <tr><td style="text-align:center;"><code>getRotateAngleY()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Obtain the group's Y angle</td></tr> <tr><td style="text-align:center;"><code>getRotateAngleZ()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Obtain the group's Z angle</td></tr> <tr><td style="text-align:center;"><code>getInitRotateAngleX()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Get ModelRenderer's initialization x rotate angle</td></tr> <tr><td style="text-align:center;"><code>getInitRotateAngleY()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Get ModelRenderer's initialization y rotate angle</td></tr> <tr><td style="text-align:center;"><code>getInitRotateAngleZ()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Get ModelRenderer's initialization z rotate angle</td></tr> <tr><td style="text-align:center;"><code>getOffsetX()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Obtain the group's X coordianate offset</td></tr> <tr><td style="text-align:center;"><code>getOffsetY()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Obtain the group's Y coordianate offset</td></tr> <tr><td style="text-align:center;"><code>getOffsetZ()</code></td> <td style="text-align:center;"><code>float</code></td> <td style="text-align:center;">Obtain the group's Y coordianate offset</td></tr> <tr><td style="text-align:center;"><code>isHidden()</code></td> <td style="text-align:center;"><code>boolean</code></td> <td style="text-align:center;">Check if the group is hidden</td></tr></tbody></table> <h3 id="glwrapper"><a href="#glwrapper" class="header-anchor">#</a> GlWrapper</h3> <p>On the top of the script we used a tool called <code>GlWrapper</code>, that can make various translation, rotation and scaling operations.</p> <table><thead><tr><th style="text-align:center;">Function name</th> <th style="text-align:center;">Return value</th> <th style="text-align:center;">Note</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>translate(float x, float y, float z)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Move the entity to coordiate x y z</td></tr> <tr><td style="text-align:center;"><code>rotate(float angle, float x, float y, float z)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Using a straight line<code>(0, 0, 0) (x, y, z)</code> as axis, rotate it by <code>angle</code> degree.</td></tr> <tr><td style="text-align:center;"><code>scale(float x, float y, float z)</code></td> <td style="text-align:center;">None</td> <td style="text-align:center;">Scale entity on three axis by x y z times</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TouhouLittleMaid/ru_RU/chair_model_pack_details.html" class="prev">
        Детали моделей стульев
      </a></span> <span class="next"><a href="/TouhouLittleMaid/ru_RU/preset_animation.html">
        Анимация пресета
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/TouhouLittleMaid/assets/js/app.0d214d66.js" defer></script><script src="/TouhouLittleMaid/assets/js/2.6bfae921.js" defer></script><script src="/TouhouLittleMaid/assets/js/1.e6d3c32f.js" defer></script><script src="/TouhouLittleMaid/assets/js/95.aa13d0bc.js" defer></script>
  </body>
</html>
